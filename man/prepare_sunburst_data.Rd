% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_data.R
\name{prepare_sunburst_data}
\alias{prepare_sunburst_data}
\title{Prepare Data for Sunburst Charts}
\usage{
prepare_sunburst_data(
  data,
  rings,
  segments,
  values = NULL,
  ring_order = "appearance",
  segment_order = "appearance",
  ring_gap = 0,
  segment_gap = 0.02,
  inner_radius = 0.3,
  border_width = 0.5
)
}
\arguments{
\item{data}{A data frame containing the source data.}

\item{rings}{Column name (string) for the ring variable (e.g., timepoint/visit).
Each unique value becomes a concentric ring, from innermost (earliest) to
outermost (latest).}

\item{segments}{Column name (string) for the segment variable (e.g., grade,
category). Each unique value becomes a slice of the sunburst.}

\item{values}{Optional column name for counts/weights. If NULL, rows are counted.}

\item{ring_order}{How to order rings: "appearance" (default), "alphabetical",
"reverse", or a character vector of ring names.}

\item{segment_order}{How to order segments: "appearance" (default),
"alphabetical", "frequency", or a character vector of segment names.}

\item{ring_gap}{Numeric gap between rings (default 0, use 0 for no gap).}

\item{segment_gap}{Numeric gap between segments in radians (default 0.02).}

\item{inner_radius}{Inner radius of the innermost ring (default 0.3).}

\item{border_width}{Width of border lines between rings (default 0.5).}
}
\value{
A data frame with columns for plotting: segment_id, ring_id,
xmin, xmax, ymin, ymax, fill, count, proportion, and label positioning.
}
\description{
Convert various data formats into the internal format required for
sunburst charts. Handles both hierarchical (nested) data and
longitudinal (wide-format) data.
}
\examples{
# AE grade distribution over time
df <- data.frame(
  visit = rep(c("Baseline", "Week 4", "Week 8"), each = 100),
  grade = sample(0:4, 300, replace = TRUE, prob = c(0.3, 0.35, 0.2, 0.1, 0.05))
)
prepared <- prepare_sunburst_data(
  df,
  rings = "visit",
  segments = "grade"
)
}
